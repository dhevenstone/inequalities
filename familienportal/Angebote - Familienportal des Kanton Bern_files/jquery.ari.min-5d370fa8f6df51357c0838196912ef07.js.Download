// ==================================================
// ari v1.7.4
//
// Licensed GPLv3 for open source use
//
// Copyright 2018 internezzo ag, Kathleen Peschke
//
// ==================================================
!function(t,i,a,r){"use strict";a&&(a.fn.ariVersion="1.7.4",a.fn.ari=function(r){var e=a.extend({imgProviderUrl:"/imgprovider/{identifier}/{hash}/{width}/{filename}",preLoadScrollAmount:300,onStart:!1,onEnd:!1},r),n=this,o=function(a){var r;return r=a[0].getBoundingClientRect(),r.bottom>0&&r.right>0&&r.left<(t.innerWidth||i.documentElement.clientWidth)&&r.top-e.preLoadScrollAmount<(t.innerHeight||i.documentElement.clientHeight)},d=function(t){return t.data("ari-forceload")||!1},h=function(t){return t.data("ari-loaded")||!1},l=function(t){return t.data("ari-size-reached")||!1},c=function(t){var i=t.find("img");return i.length>0&&parseInt(i[0].naturalWidth)/u()<parseInt(t.width())},u=function(){return t.devicePixelRatio},s=function(t){var i=t.data("ari-params");return i=i.replace(/'/g,'"'),i=JSON.parse(i)},g=function(t){var i=s(t),r=Math.round(t.width()),n=Math.round(t.outerHeight()),o=u(),d=n,h="og";r>i.maxwidth&&(r=i.maxwidth,o=1),r=Math.round(r*o),n=Math.round(n*o),void 0===t.data("ari-respectheight")&&(n=0),void 0!==t.data("ari-maxheight")&&(h="mh-"+t.data("ari-maxheight"));var l=t.data("ari-sizefactor");return a.isNumeric(l)&&(r=Math.round(r*l),n=Math.round(n*l)),e.imgProviderUrl.replace(/{identifier}/,i.id).replace(/{hash}/,i.hash).replace(/{width}/,r.toString()).replace(/{height}/,n.toString()).replace(/{visibleHeight}/,d.toString()).replace(/{filename}/,i.name).replace(/{originalwidth}/,i.originalwidth).replace(/{originalheight}/,i.originalheight).replace(/{processing}/,h)},m=function(t){var i=s(t),r=c(t);t.attr("data-ari-loaded",!0).attr("data-ari-size-reached",r).find("img:nth-child(2)").fadeOut("fast",function(){a(this).remove()}),r&&(t.removeAttr("style"),t.removeClass("img-ari--responsive"),n.init(t)),t.find("img").attr({alt:i.alt||"",title:i.title||""})},f=function(t){if(a.isFunction(e.onStart)&&e.onStart.call(this),(o(t)||d(t))&&(!h(t)||c(t)&&!l(t))){if(t.data("ari-loading"))return;t.attr("data-ari-loading",!0);var i=new Image,r=s(t),u=g(t);i.onload=function(){t.attr("data-ari-natwidth",i.width),t.prepend(i),m(t),t.attr("data-ari-loading",!1)},i.onerror=function(){var i=r.alt||"",a=r.title||"",e=i.length>0?i:a;e.length>0&&t.html("<p>"+e+"</p>"),t.attr("data-ari-loaded",!0).attr("data-ari-size-reached",!0).removeAttr("style").removeClass("img-ari--responsive"),n.init(t)},i.src=u}a.isFunction(e.onEnd)&&e.onEnd.call(this)};return n.each(function(){var t=a(this);t.data("ari-size-reached")||t.data("ari-loading")||f(a(this))})})}(window,document,window.jQuery);